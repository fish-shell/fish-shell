# s3cmd

function __s3cmd_is_remote_path
	commandline -ct | string match -r -- "^s3://.*"
end

function __s3cmd_is_valid_remote_path
	commandline -ct | string match -r -- "^s3://.*?/.*"
end

# Completions to allow for autocomplete of remote paths
complete -c s3cmd -f -n "__s3cmd_is_valid_remote_path" -a "(s3cmd ls (commandline -ct) 2>/dev/null)"
complete -c s3cmd -f -n "__s3cmd_is_remote_path"

# Autogenerated from man page /usr/share/man/man1/s3cmd.1.gz
# Generated against s3cmd version 2.0
complete -c s3cmd -s h -l help --description 'show this help message and exit.'
complete -c s3cmd -l configure --description 'Invoke interactive (re)configuration tool.'
complete -c s3cmd -s c -l config --description 'Config file name.  Defaults to $HOME/. s3cfg.'
complete -c s3cmd -l dump-config --description 'Dump current configuration after parsing config files and command line option…'
complete -c s3cmd -l access_key --description 'AWS Access Key.'
complete -c s3cmd -l secret_key --description 'AWS Secret Key.'
complete -c s3cmd -l access_token --description 'AWS Access Token.'
complete -c s3cmd -s n -l dry-run --description 'Only show what should be uploaded or downloaded but don\'t actually do it.'
complete -c s3cmd -s s -l ssl --description 'Use HTTPS connection when communicating with S3.  (default).'
complete -c s3cmd -l no-ssl --description 'Don\'t use HTTPS.'
complete -c s3cmd -s e -l encrypt --description 'Encrypt files before uploading to S3.'
complete -c s3cmd -l no-encrypt --description 'Don\'t encrypt files.'
complete -c s3cmd -s f -l force --description 'Force overwrite and other dangerous operations.'
complete -c s3cmd -l continue --description 'Continue getting a partially downloaded file (only for [get] command).'
complete -c s3cmd -l continue-put --description 'Continue uploading partially uploaded files or multipart upload parts.'
complete -c s3cmd -l upload-id --description 'UploadId for Multipart Upload, in case you want continue an existing upload (…'
complete -c s3cmd -l skip-existing --description 'Skip over files that exist at the destination (only for [get] and [sync] comm…'
complete -c s3cmd -s r -l recursive --description 'Recursive upload, download or removal.'
complete -c s3cmd -l check-md5 --description 'Check MD5 sums when comparing files for [sync].  (default).'
complete -c s3cmd -l no-check-md5 --description 'Do not check MD5 sums when comparing files for [sync].'
complete -c s3cmd -s P -l acl-public --description 'Store objects with ACL allowing read for anyone.'
complete -c s3cmd -l acl-private --description 'Store objects with default ACL allowing access for you only.'
complete -c s3cmd -l acl-grant --description 'Grant stated permission to a given amazon user.'
complete -c s3cmd -l acl-revoke --description 'Revoke stated permission for a given amazon user.'
complete -c s3cmd -s D -l restore-days --description 'Number of days to keep restored file available (only for \'restore\' command).'
complete -c s3cmd -l restore-priority --description 'Priority for restoring files from S3 Glacier (only for \'restore\' command).'
complete -c s3cmd -l delete-removed --description 'Delete destination objects with no corresponding source file [sync].'
complete -c s3cmd -l no-delete-removed --description 'Don\'t delete destination objects.'
complete -c s3cmd -l delete-after --description 'Perform deletes after new uploads [sync].'
complete -c s3cmd -l delay-updates --description '*OBSOLETE* Put all updated files into place at end [sync].'
complete -c s3cmd -l max-delete --description 'Do not delete more than NUM files.  [del] and [sync].'
complete -c s3cmd -l limit --description 'Limit number of objects returned in the response body (only for [ls] and [la]…'
complete -c s3cmd -l add-destination --description 'Additional destination for parallel uploads, in addition to last arg.'
complete -c s3cmd -l delete-after-fetch --description 'Delete remote objects after fetching to local file (only for [get] and [sync]…'
complete -c s3cmd -s p -l preserve --description 'Preserve filesystem attributes (mode, ownership, timestamps).'
complete -c s3cmd -l no-preserve --description 'Don\'t store FS attributes.'
complete -c s3cmd -l exclude --description 'Filenames and paths matching GLOB will be excluded from sync.'
complete -c s3cmd -l exclude-from --description 'Read --exclude GLOBs from FILE.'
complete -c s3cmd -l rexclude --description 'Filenames and paths matching REGEXP (regular expression) will be excluded fro…'
complete -c s3cmd -l rexclude-from --description 'Read --rexclude REGEXPs from FILE.'
complete -c s3cmd -l include --description 'Filenames and paths matching GLOB will be included even if previously exclude…'
complete -c s3cmd -l include-from --description 'Read --include GLOBs from FILE.'
complete -c s3cmd -l rinclude --description 'Same as --include but uses REGEXP (regular expression) instead of GLOB.'
complete -c s3cmd -l rinclude-from --description 'Read --rinclude REGEXPs from FILE.'
complete -c s3cmd -l files-from --description 'Read list of source-file names from FILE.  Use - to read from stdin.'
complete -c s3cmd -l region -l bucket-location --description 'Region to create bucket in.'
complete -c s3cmd -l host --description 'HOSTNAME:PORT for S3 endpoint (default: s3. amazonaws.'
complete -c s3cmd -l host-bucket --description 'DNS-style bucket+hostname:port template for accessing a bucket (default: %(bu…'
complete -c s3cmd -l reduced-redundancy -l rr --description 'Store object with \'Reduced redundancy\'.  Lower per-GB price.  [put, cp, mv].'
complete -c s3cmd -l no-reduced-redundancy -l no-rr --description 'Store object without \'Reduced redundancy\'.  Higher per- GB price.'
complete -c s3cmd -l storage-class --description 'Store object with specified CLASS (STANDARD, STANDARD_IA, or REDUCED_REDUNDAN…'
complete -c s3cmd -l access-logging-target-prefix --description 'Target prefix for access logs (S3 URI) (for [cfmodify] and [accesslog] comman…'
complete -c s3cmd -l no-access-logging --description 'Disable access logging (for [cfmodify] and [accesslog] commands).'
complete -c s3cmd -l default-mime-type --description 'Default MIME-type for stored objects.'
complete -c s3cmd -s M -l guess-mime-type --description 'Guess MIME-type of files by their extension or mime magic.'
complete -c s3cmd -l no-guess-mime-type --description 'Don\'t guess MIME-type and use the default type instead.'
complete -c s3cmd -l no-mime-magic --description 'Don\'t use mime magic when guessing MIME-type.'
complete -c s3cmd -s m -l mime-type --description 'Force MIME-type.  Override both --default-mime-type and --guess-mime-type.'
complete -c s3cmd -l add-header --description 'Add a given HTTP header to the upload request.  Can be used multiple times.'
complete -c s3cmd -l remove-header --description 'Remove a given HTTP header.   Can be used multiple times.'
complete -c s3cmd -l server-side-encryption --description 'Specifies that server-side encryption will be used when putting objects.'
complete -c s3cmd -l server-side-encryption-kms-id --description 'Specifies the key id used for server-side encryption with AWS KMS-Managed Key…'
complete -c s3cmd -l encoding --description 'Override autodetected terminal and filesystem encoding (character set).'
complete -c s3cmd -l add-encoding-exts --description 'Add encoding to these comma delimited extensions i. e.'
complete -c s3cmd -l verbatim --description 'Use the S3 name as given on the command line.'
complete -c s3cmd -l disable-multipart --description 'Disable multipart upload on files bigger than --multipart-chunk-size-mb.'
complete -c s3cmd -l multipart-chunk-size-mb --description 'Size of each chunk of a multipart upload.'
complete -c s3cmd -l list-md5 --description 'Include MD5 sums in bucket listings (only for \'ls\' command).'
complete -c s3cmd -s H -l human-readable-sizes --description 'Print sizes in human readable form (eg 1kB instead of 1234).'
complete -c s3cmd -l ws-index --description 'Name of index-document (only for [ws-create] command).'
complete -c s3cmd -l ws-error --description 'Name of error-document (only for [ws-create] command).'
complete -c s3cmd -l expiry-date --description 'Indicates when the expiration rule takes effect.  (only for [expire] command).'
complete -c s3cmd -l expiry-days --description 'Indicates the number of days after object creation the expiration rule takes …'
complete -c s3cmd -l expiry-prefix --description 'Identifying one or more objects with the prefix to which the expiration rule …'
complete -c s3cmd -l progress --description 'Display progress meter (default on TTY).'
complete -c s3cmd -l no-progress --description 'Don\'t display progress meter (default on non-TTY).'
complete -c s3cmd -l stats --description 'Give some file-transfer stats.'
complete -c s3cmd -l enable --description 'Enable given CloudFront distribution (only for [cfmodify] command).'
complete -c s3cmd -l disable --description 'Disable given CloudFront distribution (only for [cfmodify] command).'
complete -c s3cmd -l cf-invalidate --description 'Invalidate the uploaded filed in CloudFront.  Also see [cfinval] command.'
complete -c s3cmd -l cf-invalidate-default-index --description 'When using Custom Origin and S3 static website, invalidate the default index …'
complete -c s3cmd -l cf-no-invalidate-default-index-root --description 'When using Custom Origin and S3 static website, don\'t invalidate the path to …'
complete -c s3cmd -l cf-add-cname --description 'Add given CNAME to a CloudFront distribution (only for [cfcreate] and [cfmodi…'
complete -c s3cmd -l cf-remove-cname --description 'Remove given CNAME from a CloudFront distribution (only for [cfmodify] comman…'
complete -c s3cmd -l cf-comment --description 'Set COMMENT for a given CloudFront distribution (only for [cfcreate] and [cfm…'
complete -c s3cmd -l cf-default-root-object --description 'Set the default root object to return when no object is specified in the URL.'
complete -c s3cmd -s v -l verbose --description 'Enable verbose output.'
complete -c s3cmd -s d -l debug --description 'Enable debug output.'
complete -c s3cmd -l version --description 'Show s3cmd version (2. 0. 0) and exit.'
complete -c s3cmd -s F -l follow-symlinks --description 'Follow symbolic links as if they are regular files.'
complete -c s3cmd -l cache-file --description 'Cache FILE containing local source MD5 values.'
complete -c s3cmd -s q -l quiet --description 'Silence output on stdout.'
complete -c s3cmd -l ca-certs --description 'Path to SSL CA certificate FILE (instead of system default).'
complete -c s3cmd -l check-certificate --description 'Check SSL certificate validity.'
complete -c s3cmd -l no-check-certificate --description 'Do not check SSL certificate validity.'
complete -c s3cmd -l check-hostname --description 'Check SSL certificate hostname validity.'
complete -c s3cmd -l no-check-hostname --description 'Do not check SSL certificate hostname validity.'
complete -c s3cmd -l signature-v2 --description 'Use AWS Signature version 2 instead of newer signature methods.'
complete -c s3cmd -l limit-rate --description 'Limit the upload or download speed to amount bytes per second.'
complete -c s3cmd -l requester-pays --description 'Set the REQUESTER PAYS flag for operations.'
complete -c s3cmd -s l -l long-listing --description 'Produce long listing [ls].'
complete -c s3cmd -l stop-on-error --description 'stop if error in transfer.'
complete -c s3cmd -l content-disposition --description 'Provide a Content-Disposition for signed URLs, e. g.'
complete -c s3cmd -l content-type --description 'Provide a Content-Type for signed URLs, e. g.'

